pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- zoob
-- by jminor

t_solid=0
t_player=1
t_deadly=2
t_toggle=3
t_wire=4
t_power=5
t_conductor=0
t_beam=6
t_win=7

up={0,-1}
down={0,1}
left={-1,0}
right={1,0}
alldirs={up,down,left,right}
power_dirs={
 [7]=alldirs,
 [8]=alldirs,
 [9]=alldirs,
 [23]=alldirs,
 [24]=alldirs,
 [25]=alldirs,
 [34]={right,down},
 [35]={left,down},
 [36]={right,left},
 [37]={right},
 [38]={left},
 [49]=alldirs,
 [50]={right,up},
 [51]={left,up},
 [52]={up,down},
 [53]={down},
 [54]={up}
}
power_offset=6
power_speed=2

function _init()
 debugs={}
 clock=0
 sprites={}
 cam={
  x=0, y=0,
  maxx=128, maxy=64,
  shakex=0, shakey=0,
  target={x=8,y=0}
 }
 lava={
  y=64,
  vy=-0.021
 }
 dirty=nil
 for y=0,cam.maxy do
  for x=0,cam.maxx do
   local tile=mget(x,y)
   if fget(tile,t_player) then
    make_player(tile,x,y)
   end
   if fget(tile,t_deadly) then
    make_deadly(tile,x,y)
   end
   if fget(tile,t_beam) then
    make_beam(tile,x,y)
   end
  end
 end
 del(sprites,player)
 add(sprites,player)
 cam.y=player.y-8
end

function make_player(tile,x,y)
 local s=make_sprite(tile,x,y)
 player=s
 s.name="player"
 s.ntiles=2
 s.w=6/8
 s.speed=1/8
 s.life=100
 s.update=update_player
 return s
end

function update_player(p)
 p.cx=0
 p.cy=0
 if btn(0) then
  p.cx=-1
  p.flipx=true
 end
 if btn(1) then
  p.cx=1
  p.flipx=false
 end
 p.wasstanding=p.standing
 p.standing=not can_move(p,0,1)
 if p.standing then
  if not p.wasstanding then
--   cam.shakey=-p.vy
  end
  if btnp(4) or btnp(2) then
   p.vy=-p.jump
  end
  if abs(cam.target.y-p.y)>4 then
   cam.target.y=p.y
  end
 end
--  if btn(2) then p.cy=-1 end
--  if btn(3) then p.cy=1 end
 p.vx=p.cx*p.speed
 p.vy+=p.gravity
 try_move(p,p.vx,p.vy)
 p.clock+=p.cx/4
 p.tile=p.tile0+p.clock%p.ntiles

 if p.y > lava.y-1 then
  p.life-=1
  cam.shakex=rnd()*10-5
  cam.shakey=rnd()*10-5
  if p.life<0 then
   for i=1,500 do
    pprint("game over",64,i)
    if i>60 then
     pprint("press â or ğŸ…¾ï¸",80,7)
     pprint(" to try again",88,7)
     if btn(â) or btn(ğŸ…¾ï¸) then break end
    end
    flip()
   end
   reload()
   _init()
  end
 end
 
 local tile=mget(p.x,p.y)
 if fget(tile,t_win) then
  for i=1,500 do
   pprint("you win!!!",64,i)
   flip()
  end
  reload()
  _init()
 end
 if not fget(tile,t_toggle) then
  turn_on(p.x,p.y)
 end
end

function pprint(str,y,c)
 local x=64-#str*2
 print(str,x-1,y-1,0)
 print(str,x-1,y+1,0)
 print(str,x+1,y-1,0)
 print(str,x+1,y+1,0)
 print(str,x,y,c)
end

function turn_on(x,y)
 local tile=mget(x,y)
 if fget(tile,t_wire) then
  mset(x,y,tile+power_offset)
  local z=2
  if dirty==nil then
   dirty={
   	x0=x-z,x1=x+z,
   	y0=y-z,y1=y+z
   	}
  else
   dirty.x0=min(dirty.x0,x-z)
   dirty.x1=max(dirty.x1,x+z)
   dirty.y0=min(dirty.y0,y-z)
   dirty.y1=max(dirty.y1,y+z)
  end
 end
end

function is_solid(x,y,w,h)
 w-=1/8
 h-=1/8
 if (fget(mget(x,y),t_solid)
  or fget(mget(x+w,y),t_solid)
  or fget(mget(x,y+h),t_solid)
  or fget(mget(x+w,y+h),t_solid))
 then
  return true
 end
 return false
end

function try_move(s,dx,dy)
 local e=1/8
 while abs(dx)>e do
  try_move1(s,sgn(dx)*e,0)
  dx-=sgn(dx)*e
 end
 while abs(dy)>e do
  try_move1(s,0,sgn(dy)*e)
  dy-=sgn(dy)*e
 end
 try_move1(s,dx,dy)
end

function can_move(s,dx,dy)
 return not is_solid(s.x+dx,s.y+dy,s.w,s.h)
end

function try_move1(s,dx,dy)
 -- first try x
 if not can_move(s,dx,0) then
-- if is_solid(s.x+dx,s.y,s.w,s.h) then
  dx=0
 end
 -- then try y
 if not can_move(s,0,dy) then
-- if is_solid(s.x+dx,s.y+dy,s.w,s.h) then
  dy=0
  s.vy=0
 end
 s.x+=dx
 s.y+=dy
end

function make_deadly(tile,x,y)
 local s=make_sprite(tile,x,y)
 s.name="deadly"
 s.ntiles=1
 s.gravity=0
 s.update=function(s)
  s.clock+=.13
  --s.tile=s.tile0+s.clock%s.ntiles
  s.flipx=flr(s.clock%2)==0
 end
 return s
end

function make_beam(tile,x,y)
 local s=make_sprite(tile,x,y)
 s.name="beam"
 s.ntiles=2
 s.gravity=0
 s.update=function(s)
  s.clock+=1/2
  s.tile=s.tile0+s.clock%s.ntiles
 end
 return s
end

function make_sprite(tile,x,y)
 local s={
  name="?",
  x=x, y=y, -- position
  w=1, h=1,
  vx=0, vy=0, -- velocity
  cx=0, cy=0, -- control
  gravity=1/60, -- multiplier
  speed=2,
  jump=0.27,
  tile=tile, tile0=tile, ntiles=1,
  flipx=false, flipy=false,
  clock=0,
  update=nil,
  draw=draw_sprite
 }
 add(sprites,s)
 mset(x,y,0)
 return s
end

function draw_sprite(s)
 local offset=0
 if (s.flipx) offset=-(1-s.w)
 spr(s.tile, (s.x+offset)*8, s.y*8,
 	1, 1, s.flipx, s.flipy)
-- debug(s.name..":"..s.tile.."@"..s.x..","..s.y)
end

function _update60()
 for s in all(sprites) do
  if s.update ~= nil then
   s.update(s)
  end
 end
 if clock%power_speed==0 then
  update_map()
 end
 update_lava(lava)
 update_camera(cam)
 clock+=1
end

function find_power(x,y,dx,dy)
 x+=dx
 y+=dy
 for i=0,5 do
  local tile=mget(x,y)
  if fget(tile,t_power) then
   local dirs=power_dirs[tile-power_offset]
   for d in all(dirs) do
    if d[1]==-dx and d[2]==-dy then
     return true
    end
   end
  end
  if (not fget(tile,t_conductor)) break
  x+=dx
  y+=dy
 end
 return false
end

function near_power(x,y,tile)
 local dirs=power_dirs[tile]
 if (not dirs) return false
 for d in all(dirs) do
  if find_power(x,y,d[1],d[2]) then
   return true
  end
 end
 return false
end

function near_power1(x,y,tile)
 if (find_power(x,y,-1,0)
  or find_power(x,y,1,0)
  or find_power(x,y,0,-1)
  or find_power(x,y,0,1))
  then return true
 end
 return false
end

function update_map()
 if dirty==nil then return end
 local todo={}
 for y=dirty.y0,dirty.y1 do
  for x=dirty.x0,dirty.x1 do
   local tile=mget(x,y)
   if fget(tile,t_wire) and near_power(x,y,tile) then
    add(todo,{x=x,y=y,tile=tile})
   end
  end
 end
 for p in all(todo) do
  turn_on(p.x,p.y)
 end
 if #todo==0 then
  dirty=nil
 end
end

function debug(txt)
 add(debugs,txt)
end

function draw_debug()
 local y=8
 for txt in all(debugs) do
  print(txt, 0,y,7)
  y+=8
 end
 debugs={}
end

function lerp(a,b,t)
 return a+(b-a)*t
end

function update_camera(cam)
 if cam.target then
  cam.x=lerp(cam.x,cam.target.x-8,0.05)
  cam.y=lerp(cam.y,cam.target.y-8,0.05)
 end
 cam.shakex*=-0.1
 cam.shakey*=-0.1
end

function update_lava(lava)
 lava.y+=lava.vy
end

function draw_lava(lava)
 local f=false
 local dx=rnd()*1-0.5
 local dy=rnd()*1-0.5
 local y=lava.y*8+dy
 if (flr(clock*0.15)%2==0) f=true
 rectfill(0,y+4,16*8,128*8,8)
 for x=0,16 do
  spr(97,x*8+dx,y,1,1,f)
 end
end

function _draw()
 cls()
 camera((cam.x+cam.shakex)*8,
 	(cam.y+cam.shakey)*8)
 map(0,0,0,0,128,128)
 for s in all(sprites) do
  if s.draw ~= nil then
   s.draw(s)
  end
 end
 draw_lava(lava)
 camera()
 draw_debug()
end

-->8
-- foo
foo=1

__gfx__
000000006666666606666666666666606666666666666666666666660111111001c10101010101010cccccc00ccccccccccccccc066666600666666666666666
000000006000000666000000000000660000000060000000000000061c0000c11c00000000000000cc7777cccc77777777777777660000666600000000000000
0000000060dddd06600dddddddddd006dddddddd60dddddddddddd06c000000c1000000000000000c777777cc777777777777777600aa006600aaaaaaaaaaaaa
0000000060dddd0660dddddddddddd06dddddddd60dddddddddddd06100000011000000000000000c777777cc77777777777777760aaaa0660aaaaaaaaaaaaaa
0000000060dddd0660dddddddddddd06dddddddd60dddddddddddd06000000001000000000000000c777777cc77777777777777760aaaa0660aaaaaaaaaaaaaa
0000000060dddd0660dddddddddddd06dddddddd60dddddddddddd06100000011000000000000000c777777cc77777777777777760aaaa06600aaaaaaaaaaaaa
000000006000000660dddddddddddd06000000006000000000000006000000001c00000000000000c777777ccc7777777777777760aaaa066600000000000000
000000006666666660ddddd00ddddd066666666666666666666666661000000101c1010101010101c777777c0ccccccccccccccc60aaaa060666666666666666
000000006666666660ddddd00ddddd0660dddd066666666660dddd060000000010101c1000000000c777777cccccccc0c777777c60aaaa066666666060aaaa06
000000006666666660dddddddddddd0660dddd066000000660dddd0610000001000000c110000001c777777c777777ccc777777c60aaaa060000006660aaaa06
000000006666666660dddddddddddd0660dddd0660dddd0660dddd06000000000000000100000000c777777c7777777cc777777c60aaaa06aaaaa00660aaaa06
000000006666666660dddddddddddd0660dddd0660dddd0660dddd06100000010000000110000001c777777c7777777cc777777c60aaaa06aaaaaa0660aaaa06
000000006666666660dddddddddddd0660dddd0660dddd0660dddd06000000000000000100000000c777777c7777777cc777777c60aaaa06aaaaaa0660aaaa06
0000000066666666600dddddddddd00660dddd0660dddd0660dddd06c000000c0000000110000001c777777c7777777cc777777c600aa006aaaaa00660aaaa06
0000000066666666660000000000006660dddd0660dddd06600000061c0000c1000000c100000000cc7777cc777777ccc777777c660000660000006660aaaa06
0000000066666666066666666666666060dddd0660dddd06666666660111111010101c10100000010cccccc0ccccccc0c777777c066666606666666060aaaa06
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060ddddd000dddd0600000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060ddddd00dddd00600000000
0000000000111100000111111111100011111111000111111111100000111100000111111111100011111111000111111111100060dddddddddd006000000000
00000000001111000011111010111100101010100011101010101100001111000011111a1a1111001a1a1a1a00111a1a1a1a110060dddddddddd060000000000
000000000011110000110110101101001010101000111010101011000011a1000011a11a1a11a1001a1a1a1a00111a1a1a1a110060dddddddddd060000000000
000000000011110000111011111011001111111100011111111110000011110000111a11111a110011111111000111111111100060dddddddddd006000000000
0000000000000000001111111111110000000000000000000000000000000000001111111111110000000000000000000000000060ddddd00dddd00600000000
0000000000000000001001100110010000000000000000000000000000000000001aa110011aa10000000000000000000000000060ddddd000dddd0600000000
00000000111111110011111001111100001111000000000000111100111111110011111001111100001111000000000000111100000000060ddddd0600000000
000000001011110100100111111001000010010000000000001001001a1111a1001aa111111aa100001aa10000000000001aa10000000060ddddd06000000000
000000001111111100111111111111000011110000011000001111001111111100111111111111000011110000011000001111000000060ddddd060000000000
000000001111111100111010101011000010010000111100001001001111111100111a1a1a1a1100001aa10000111100001aa100000060ddddd0600000000000
00000000111111110011011010110100001111000011110000111100111111110011a11a1a11a10000111100001111000011110000060ddddd06000000000000
00000000111111110001111111111000001001000010010000011000111111110001111111111000001aa100001aa100000110000060ddddd060000000000000
000000001011110100000000000000000011110000111100000000001a1111a10000000000000000001111000011110000000000060ddddd0600000000000000
00000000111111110000000000000000001001000010010000000000111111110000000000000000001aa100001aa1000000000060ddddd06000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00cccc0000cccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c7770000c7770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c7770000c7770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccc000ccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccc000ccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c000c0000c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cc00cc000cccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000cccccccccccccccc11111111000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000077777777cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000077777777cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000077777777cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000077777777cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000077777777cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000077777777cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000cccccccccccccccc11111111000000000000000000000000000000000000000000000000000000000000000000000000
00000000090909098888888888888888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
99999999999999998888888888988888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
88888888989898988888888888888888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
99999999888888888888888888888888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
88888888898989898888888888888988c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888888888888888888888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888888888888888888888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888888888888888888888c777777ccccccccc1cccccc1000000000000000000000000000000000000000000000000000000000000000000000000
000000000b0b0b0b33333333333333b3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbb333333333333333300cccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333b3b3b3b33333333333333333099aa9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb3333333333333333333b3333000aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
333333333b3b3b3b3333333333333333000aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333333333300aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
333333333333333333333333333333330cccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333333333333333333c999999c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
43410000204060000000000010000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
43410000410000000000000043000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
13418100412242423200000013428041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
43610000418100001000000043000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
13000010414300000000000010000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000411342104232000000000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80909081414300000043224242428041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00434300418100000043430000000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00434300410000000043430000000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00434300214060424233234242504031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00434300000050600000000050600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
52131362000000000050600000005353000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
52131362000000000000000022421313000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00636300000050600000000023421313000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000530050600000006363000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000002242136200506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001000630000000000005060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00506000004300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008081421362005060000000506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006300000080909090810000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00809090810000000000000043000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000043000000000022424233000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10000043002040404040300000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
41000043002131000021310000000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
41000043000043000043000022808110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10000023424213000013424233000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
41000000000063000043001000000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
41000004000053000043203117171741000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
41000010404040404040311027373741000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10320000000023322233004637272710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22330000000000434300004627273732000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
43000000000000434300004637273743000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000011110000000000000000000000000001c1010101010101010101010101010110101c100000000000000000
0000000000000000000000000000000000000000001001000000000000000000000000001c000000000000000000000000000000000000c10000000000000000
00000000000000000000000000000000000000000011110000000000000000000000000010000000000000000000000000000000000000010000000000000000
00000000000000000000000000000000000000000010010000000000000000000000000010000000000000000000000000000000000000010000000000000000
00000000000000000000000000000000000000000011110000000000000000000000000010000000000000000000000000000000000000010000000000000000
00000000000000000000000000000000000000000001100000000000000000000000000010000000000000000000000000000000000000010000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000c10000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000001c1010101010101010101010101010110101c100000000000000000
0000000001c10101010101010101010110101c100000000000000000000000000000000000000000000000000000000000111100000000000000000000000000
000000001c0000000000000000000000000000c10000000000000000000000000000000000000000000000000000000000100100000000000000000000000000
00000000100000000000000000000000000000010000000000000000000000000000000000000000000000000000000000111100000000000000000000000000
00000000100000000000000000000000000000010000000000000000000000000000000000000000000000000000000000100100000000000000000000000000
00000000100000000000000000000000000000010000000000000000000000000000000000000000000000000000000000111100000000000000000000000000
00000000100000000000000000000000000000010000000000000000000000000000000000000000000000000000000000100100000000000000000000000000
000000001c0000000000000000000000000000c10000000000000000000000000000000000000000000000000000000000111100000000000000000000000000
0000000001c10101010101010101010110101c100000000000000000000000000000000000000000000000000000000000100100000000000000000000000000
00000000000000000000000000111100000000000000000000000000000000000000000000000000000000000000000001111100000000000000000000000000
00000000000000000000000000100100000000000000000000000000000000000000000000000000000000000000000011100100000000000000000000000000
00000000000000000000000000111100000000000000000000000000000000000000000000011111111111111111111111111100000000000000000000000000
00000000000000000000000000100100000000000000000000000000000000000000000000111110101010101010101010101100000000000000000000000000
00000000000000000000000000111100000000000000000000000000000000000000000000110110101010101010101010110100000000000000000000000000
00000000000000000000000000100100000000000000000000000000000000000000000000111011111111111111111111111000000000000000000000000000
00000000000000000000000000111100000000000000000000000000000000000000000000111111000000000000000000000000000000000000000000000000
00000000000000000000000000100100000000000000000000000000000000000000000000100110000000000000000000000000000000000000000000000000
66666666000000000000000000111100000000000666666666666666666666666666666666666666666666600000000000000000000000000000000066666666
60000006000000000000000000100100000000006600000000000000000000000000000000000000000000660000000000000000000000000000000060000006
60dddd0600000000000000000011110000000000600dddddddddddddddddddddddddddddddddddddddddd0060000000000000000000000000000000060dddd06
60dddd060000000000000000001001000000000060dddddddddddddddddddddddddddddddddddddddddddd060000000000000000000000000000000060dddd06
60dddd060000000000000000001111000000000060dddddddddddddddddddddddddddddddddddddddddddd060000000000000000000000000000000060dddd06
60dddd060000000000000000001001000000000060dddddddddddddddddddddddddddddddddddddddddddd060000000000000000000000000000000060dddd06
600000060000000000000000001111000000000060dddddd00000000000000000000000000000000dddddd060000000000000000000000000000000060000006
666666660000000000000000001001000000000060ddddd0666666666666666666666666666666660ddddd060000000000000000000000000000000066666666
60dddd060000000000000000001111000000000060ddddd00ddddd06000000000000000060ddddd00ddddd060000000000000000000000000000000060dddd06
60dddd060000000000000000001001000000000060dddddddddddd06000000000000000060dddddddddddd060000000000000000000000000000000060dddd06
60dddd060000000000000000001111000000000060dddddddddddd06000000000000000060dddddddddddd060000000000000000000000000000000060dddd06
60dddd060000000000000000001001000000000060dddddddddddd06000000000000000060dddddddddddd060000000000000000000000000000000060dddd06
60dddd060000000000000000001111000000000060dddddddddddd06000000000000000060dddddddddddd060000000000000000000000000000000060dddd06
60dddd0600000000000000000010010000000000600dddddddddd0060000000000000000600dddddddddd0060000000000000000000000000000000060dddd06
60dddd06000000000000000000111100000000006600000000000066000000000000000066000000000000660000000000000000000000000000000060dddd06
60dddd06000000000000000000100100000000000666666666666660000000000000000006666666666666600000000000000000000000000000000060dddd06
60dddd0600000000000000000011110000000000000000000011110000000000000000000011110000000000000000000000000001c1010110101c1066666666
60dddd060000000000000000001001000000000000000000001001000000000000000000001001000000000000000000000000001c000000000000c160000006
60dddd06000000000000000000111100000000000000000000111100000000000000000000111100000000000000000000011111100000000000000160dddd06
60dddd06000000000000000000100100000000000000000000100100000000000000000000100100000000000000000000111110100000000000000160dddd06
60dddd06000000000000000000111100000000000000000000111100000000000000000000111100000000000000000000110110100000000000000160dddd06
60dddd06000000000000000000100100000000000000000000100100000000000000000000100100000000000000000000111011100000000000000160dddd06
60dddd060000000000000000001111000000000000000000001111000000000000000000001111000000000000000000001111111c000000000000c160000006
60dddd0600000000000000000010010000000000000000000010010000000000000000000010010000000000000000000010011001c1010110101c1066666666
66666666000000000000000000111110000000000000000011111111000000000000000011111111000000000000000001111100000000000000000060dddd06
60000006000000000000000000100111000000000000000010111101000000000000000010111101000000000000000011100100000000000000000060dddd06
60dddd06000000000000000000111111111111111111111111111111000000000000000011111111111111111111111111111100000000000000000060dddd06
60dddd06000000000000000000111010101010101010101011111111000000000000000011111111101010101010101010101100000000000000000060dddd06
60dddd06000000000000000000110110101010101010101011111111000000000000000011111111101010101010101010110100000000000000000060dddd06
60dddd06000000000000000000011111111111111111111111111111000000000000000011111111111111111111111111111000000000000000000060dddd06
60000006000000000000000000000000000000000000000010111101000000000000000010111101000000000000000000000000000000000000000060dddd06
66666666000000000000000000000000000000000000000011111111000000000000000011111111000000000000000000000000000000000000000060dddd06
60dddd06000000000000000000000000000000000000000000111100000000000000000000111100000000006666666600000000000000000000000060dddd06
60dddd06000000000000000000000000000000000000000000100100000000000000000000100100000000006000000600000000000000000000000060dddd06
60dddd060000000000000000000000000000000000000000001111000000000000000000001111000000000060dddd0600000000000000000000000060dddd06
60dddd060000000000000000000000000000000000000000001001000000000000000000001001000000000060dddd0600000000000000000000000060dddd06
60dddd060000000000000000000000000000000000000000001111000000000000000000001111000000000060dddd0600000000000000000000000060dddd06
60dddd060000000000000000000000000000000000000000000110000000000000000000001001000000000060dddd0600000000000000000000000060dddd06
60dddd06000000000000000000000000000000000000000000000000000000000000000000111100000000006000000600000000000000000000000060dddd06
60dddd06000000000000000000000000000000000000000000000000000000000000000000100100000000006666666600000000000000000000000060dddd06
60dddd06000000000000000000000000000000000000000000000000000000000000000000111100066666660ddddd06b0b0b0b0b0b0b0b0b0b0b0b060dddd06
60dddd06000000000000000000cccc0000000000000000000000000000000000000000000010010066000000dddddd06bbbbbbbbbbbbbbbbbbbbbbbb60dddd06
60dddd0600000000000000000c777000000000000000000000011000000000000000000000111100600ddddddddddd063b3b3b3b3b3b3b3b3b3b3b3b60dddd06
60dddd0600000000000000000c77700000000000000000000011110000000000000000000010010060dddddddddddd0633333333333333333333333360dddd06
60dddd060000000000000000ccccc00000000000000000000011110000000000000000000011110060dddddddddddd06b3b3b3b3b3b3b3b3b3b3b3b360dddd06
60dddd060000000000000000ccccc00000000000000000000010010000000000000000000010010060ddddddddddd00633333333333333333333333360dddd06
60dddd060000000000000000c000c00000000000000000000011110000000000000000000011110060dddddd0000006633333333333333333333333360dddd06
60dddd060000000000000000cc00cc0000000000000000000010010000000000000000000010010060ddddd06666666033333333333333333333333360dddd06
60dddd060000000000000000666666666666666666666666666666666666666666666666666666660ddddd0666666666333333333b3333333b33333360dddd06
60dddd06000000000000000060000006000000000000000000000000000000000000000000000000dddddd066000000633333333333333333333333360dddd06
60dddd06000000000000000060dddd06dddddddddddddddddddddddddddddddddddddddddddddddddddddd0660dddd0633333333333333333333333360dddd06
60dddd06000000000000000060dddd06dddddddddddddddddddddddddddddddddddddddddddddddddddddd0660dddd06333333333333b3333333b33360dddd06
60dddd06000000000000000060dddd06dddddddddddddddddddddddddddddddddddddddddddddddddddddd0660dddd0633333333333333333333333360dddd06
60dddd06000000000000000060dddd06ddddddddddddddddddddddddddddddddddddddddddddddddddddd00660dddd0633333333333333333333333360dddd06
60dddd06000000000000000060000006000000000000000000000000000000000000000000000000000000666000000633333333333333333333333360dddd06
60dddd06000000000000000066666666666666666666666666666666666666666666666666666666666666606666666633333333333333333333333360dddd06
6666666600000000000000000000000000000000000000000011111000000000000000000111110000000000c777777c3b333333333333333333333366666666
6000000600000000000000000000000000000000000000000010011100000000000000001110010000000000c777777c33333333333333333333333360000006
60dddd0611111000000000000000000000000000000000000011111111111000000111111111110000000000c777777c33333333333333333333333360dddd06
60dddd0610111100000000000000000000000000000000000011101010111100001111101010110000000000c777777c3333b333333333333333333360dddd06
60dddd0610110100000000000000000000000000000000000011011010110100001101101011010000000000c777777c33333333333333333333333360dddd06
60dddd0611101100000000000000000000000000000000000001111111101100001110111111100000000000c777777c33333333333333333333333360dddd06
6000000611111100000000000000000000000000000000000000000011111100001111110000000000000000c777777c33333333333333333333333360000006
96969696919091909090909090909090909090909090909090909090919091909090919090909090909090909797979c93939393939393939393939396969696
99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
89898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
98989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898989898
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

__gff__
0001010101010118181829292929292900010101010101181818292929292929000010101010102020202020200101290010101010101020202020202001012902020000000000000000000000000000000000004000000000000000000000000404040440000000000000000000000004040404800000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0504010401212121212121010104040600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000340034210000000021343400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000322431210000000021050600000000000504030204030204030204030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003421212121212100000000000000003d3e1428141429142d042e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000034212102032121210000000000003d3e2b143914143814142a142c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000007434212114120403242423000000001204061204131204131204130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000204032114000014210008091800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6060601434142114000014212100000000000504030204030204030204030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0504041334120413000012040100000000003d043e142b14142c142d042e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2424242431242401242401241418000800001204061204131204131204130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1500000034000064000064001400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1471717171717164000064710171010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1472727215727264000064727272143500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0104040404040401000001040404010600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3600000036000036000036000000003600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000080909180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000007000034000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000222424242419000032230000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000340000000019000000310000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000340000000019000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000310000000119010001000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000017000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010000000000222424242424242300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000340000000000003400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2224242408090909091800000000003400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3415000000000000000000010000000818000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3414000000000000000000000008090918000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3414012424012424012424010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3414000000000000000000002224050300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
